<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Commande Timeless</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background: #121212; color: #fff; overflow-x: hidden; }
  header { text-align: center; padding: 20px; background: #1a1a1a; }
  header img { max-width: 200px; }
  h1 { color: #ffcc00; margin-top: 10px; font-size: 24px; }

  .category { padding: 10px 20px; }
  .category h2 { color: #ffcc00; margin-bottom: 10px; }

  .item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #333; }
  .item-controls button { width: 40px; height: 40px; margin: 0 5px; background: #ffcc00; color: #000; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; }
  .item-controls span { min-width: 30px; text-align: center; display: inline-block; font-size: 16px; }

  #cartToggle { position: fixed; bottom: 80px; right: 20px; background: #ffcc00; color: #000; border: none; padding: 12px 18px; border-radius: 50px; font-weight: bold; cursor: pointer; z-index: 11; }
  #cartOverlay { position: fixed; bottom: -100%; left: 0; right: 0; background: #1f1f1f; padding: 20px; border-top: 3px solid #ffcc00; transition: bottom 0.3s; max-height: 60%; overflow-y: auto; z-index: 10; }
  #cartOverlay.show { bottom: 0; }
  #cartItems .cart-item { display: flex; justify-content: space-between; padding: 5px 0; }
  #cartTotal { font-weight: bold; margin-top: 10px; }

  #tableNumber { padding: 12px; width: 100%; max-width: 120px; margin: 10px 0; border-radius: 5px; border: none; text-align: center; font-size: 16px; }
  #sendOrder { padding: 12px 20px; background: #ffcc00; color: #000; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; width: 100%; }
  #confirmation { margin-top: 10px; color: #00ff00; font-weight: bold; }
</style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Timeless">
    <h1>Commande Timeless</h1>
  </header>

  <!-- Boissons -->
  <div class="category">
    <h2>Boissons</h2>
    <div class="item"><span>Coca-Cola</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
    <div class="item"><span>Orange Juice</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
    <div class="item"><span>Water</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
  </div>

  <!-- Snacks -->
  <div class="category">
    <h2>Snacks</h2>
    <div class="item"><span>Chips</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
    <div class="item"><span>Chocolate Bar</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
  </div>

  <!-- Desserts -->
  <div class="category">
    <h2>Desserts</h2>
    <div class="item"><span>Ice Cream</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
    <div class="item"><span>Cake Slice</span><div class="item-controls"><button class="minus">-</button><span class="qty">0</span><button class="plus">+</button></div></div>
  </div>

  <button id="cartToggle">Voir le panier</button>

  <!-- Formulaire Formspree -->
  <div id="cartOverlay">
    <form id="cartForm" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
      <input type="number" name="tableNumber" id="tableNumber" placeholder="Numéro de table" required>
      <div id="cartItems"></div>
      <div id="cartTotal">Total: 0 €</div>
      <input type="hidden" name="orderDetails" id="orderDetails">
      <button type="submit" id="sendOrder">Envoyer la commande</button>
    </form>
    <p id="confirmation"></p>
  </div>

  <script>
    const cartToggle = document.getElementById('cartToggle');
    const cartOverlay = document.getElementById('cartOverlay');
    const cartItemsDiv = document.getElementById('cartItems');
    const cartTotalDiv = document.getElementById('cartTotal');
    const cartForm = document.getElementById('cartForm');
    const orderDetailsInput = document.getElementById('orderDetails');
    const confirmation = document.getElementById('confirmation');

    cartToggle.addEventListener('click', () => {
      cartOverlay.classList.toggle('show');
    });

    const items = document.querySelectorAll('.item');
    let cart = {};

    items.forEach(item => {
      const name = item.querySelector('span').textContent;
      const qtySpan = item.querySelector('.qty');

      item.querySelector('.plus').addEventListener('click', () => {
        cart[name] = (cart[name] || 0) + 1;
        qtySpan.textContent = cart[name];
        updateCart();
      });

      item.querySelector('.minus').addEventListener('click', () => {
        if(cart[name]) cart[name]--;
        if(cart[name] < 0) cart[name] = 0;
        qtySpan.textContent = cart[name];
        updateCart();
      });
    });

    function updateCart() {
      cartItemsDiv.innerHTML = '';
      let total = 0;
      let details = '';
      for (const [name, qty] of Object.entries(cart)) {
        if(qty > 0){
          const div = document.createElement('div');
          div.className = 'cart-item';
          div.textContent = `${name}: ${qty}`;
          cartItemsDiv.appendChild(div);
          total += qty * 2; // Exemple: chaque item = 2€
          details += `${name}: ${qty}\n`;
        }
      }
      cartTotalDiv.textContent = `Total: ${total} €`;
      orderDetailsInput.value = details;
    }

    cartForm.addEventListener('submit', (e) => {
      if(Object.keys(cart).length === 0 || Object.values(cart).every(q => q === 0)){
        e.preventDefault();
        alert('Votre panier est vide.');
        return;
      }

      confirmation.innerText = "Commande envoyée !";
      for(const item in cart) cart[item] = 0;
      items.forEach(item => item.querySelector('.qty').textContent = 0);
      updateCart();
      cartOverlay.classList.remove('show');
    });
  </script>
</body>
</html>
